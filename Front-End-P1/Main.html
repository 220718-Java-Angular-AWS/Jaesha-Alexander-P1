<!DOCTYPE html>
<html>

    <head>
        <title> Main Menu </title>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name = "viewport" content="wdth=device-width, initial -scale=1.0">
        
    </head>
    <body> 
        <h1> Project P1 </h1>

            <!-- Will start by asking them to sign up or to login -->

            <p> Sign Up or Login</p>
            <label >First Name: </label><br> 
            <input type = "text" id = "firstname" name = "firstname"> <br> 
            
            <label > Last Name: </label><br> 
            <input type = "text" id = "lastname" name = "lastname"> <br> 

            <label > Username: </label><br> 
            <input type = "text" id = "username" name = "username"> <br> 
            <label> username must contain only letters and numbers must have atleast 3 letters and atleast 1 number </label>
            <br> 
            <label > Email: </label><br> 
            <input type = "text" id = "email" name = "email"> <br> 

            <label > Password: </label><br> 
            <input type = "password" id = "password" name = "password">  
            <label> password must be a length of atleast 5 and must contain atleast 1 number </label>
            <br>
            <br>

            <input type="submit" value = "Sign Up " id = "signup", name = "signup" onclick = "goSignUp()">
            <p> or Login</p>
            <input type="submit" value = "Login " id = "login", name = "login" onclick= goLogin()>


    </body>

    <!-- SIGN UP : NEEDS TO PASS THE INFO INTO THE FUNCTION AND CALL ON THE SERVLET -->
    <script>
        // this will sign up and then send the user to login 
        async function goSignUp()
        {
            
            // want to take the info 
            let user = {
                firstname: document.getElementById("firstname").value,
                lastname: document.getElementById("lastname").value,
                email: document.getElementById("email").value,
                username: document.getElementById("username").value,
                password: document.getElementById("password").value

            };

            console.log(user);


            // url is a server location 
            let url = 'http://localhost:8080/Jaesha-Alexander-P1/user';
            
            let response = await fetch(url, {
            method: 'POST',
            mode: 'cors',
            headers: {
                'Content-Type': 'application/json;charset=utf-8',
                
            }, 

            body: JSON.stringify(user) // has a body 
        });

        alert(response.status);

        if(response.status == 200)
        {
            alert("Success");
            history.pushState(null, null, "Main.html");
            window.location.replace("Login.html");
            
        }
        else{
            alert("Invalid Sign Up Try Again....");
            location.reload();
        }
        };

    </script>



    <!-- LOGIN NEEDS TO CHANGE THE PAGE -->
    <script>
        async function goLogin()
    {
        history.pushState(null, null, "Main.html");
        window.location.replace("Login.html");
    }; 
        

    </script>



</html>